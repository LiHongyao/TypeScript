# 一、概述

使用枚举我们可以定义一些带名字的常量，可以清晰地表达意图或创建一组有区别的用例。 TypeScript支持数字的和基于字符串的枚举。

# 二、枚举类型

## 1. 数字枚举

```typescript
enum Direction {
    Up, Right, Down, Left
}
```

枚举的值默认从0开始计算，当然你也可以指定初始值

```typescript
enum Direction {
    Up = 3, Right, Down, Left
}
```

这样一来，该枚举就是从3开始的有序数字，Right = 4, Down = 5, Left = 6;

## 2. 字符串枚举

 在一个字符串枚举里，每个成员都必须用字符串字面量，或另外一个字符串枚举成员进行初始化。

```typescript
enum ErrorType {
    NO_PARAMS   = "参数缺失",
    NOT_DEFINED = "未定义",
    NOT_FOUNDE  = "未找到"
}
```

由于字符串枚举没有自增长的行为，字符串枚举可以很好的序列化。 换句话说，如果你正在调试并且必须要读一个数字枚举的运行时的值，这个值通常是很难读的 - 它并不能表达有用的信息（尽管 [反向映射](https://www.tslang.cn/docs/handbook/enums.html#enums-at-runtime)会有所帮助），字符串枚举允许你提供一个运行时有意义的并且可读的值，独立于枚举成员的名字。

## 3. 运行时的枚举

枚举是在运行时真正存在的对象，最终的编译结果是一个对象，所以你可以访问里面数据。 例如下面的枚举：

```typescript
enum LoginType {
    Normal,
    WeChat
};
```

实际上可以传递给函数：

```typescript
function  fn(arg: {WeChat: number}): void {
    console.log(arg.WeChat);
}
fn(LoginType); // 1
```

## 4. 反向映射

除了创建一个以属性名做为对象成员的对象之外，数字枚举成员还具有了反向映射，从枚举值到枚举名字。 例如，在下面的例子中

```typescript
enum Enum {
    Tel,
    Email
};

let value = Enum.Tel; 
console.log(value); // => 0

let key = Enum[value];
console.log(key);  // => Tel
```

TypeScript可能会将这段代码编译为下面的JavaScript：

```typescript
"use strict";
var Enum;
(function (Enum) {
    Enum[Enum["Tel"] = 0] = "Tel";
    Enum[Enum["Email"] = 1] = "Email";
})(Enum || (Enum = {}));
;
var value = Enum.Tel;
console.log(value); // => 0
var key = Enum[value];
console.log(key); // => Tel
```

生成的代码中，枚举类型被编译成一个对象，它包含了正向映射（ `name` -> `value`）和反向映射（ `value` -> `name`）。 引用枚举成员总会生成为对属性访问并且永远也不会内联代码。

要注意的是 不会为字符串枚举成员生成反向映射。

## 5. const 枚举

大多数情况下，枚举是十分有效的方案。 然而在某些情况下需求很严格。 为了避免在额外生成的代码上的开销和额外的非直接的对枚举成员的访问，我们可以使用 `const`枚举。 常量枚举通过在枚举上使用 `const`修饰符来定义。

```typescript
const enum Enum {
    A = 1,
    B = A * 2
}
```

常量枚举只能使用常量枚举表达式，并且不同于常规的枚举，它们在编译阶段会被删除。 常量枚举成员在使用的地方会被内联进来。 之所以可以这么做是因为，常量枚举不允许包含计算成员。

```typescript
const enum Directions {
    Up,  Down, Left, Right
}

let directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right]
```

生成后的代码为：

```typescript
"use strict";
var directions = [0 /* Up */, 1 /* Down */, 2 /* Left */, 3 /* Right */];
```

# 三、外部枚举

外部枚举用来描述已经存在的枚举类型的形状。

```typescript
declare enum Enum {
    A = 1,
    B,
    C = 2
}
```

外部枚举和非外部枚举之间有一个重要的区别，在正常的枚举里，没有初始化方法的成员被当成常数成员。 对于非常数的外部枚举而言，没有初始化方法时被当做需要经过计算的。